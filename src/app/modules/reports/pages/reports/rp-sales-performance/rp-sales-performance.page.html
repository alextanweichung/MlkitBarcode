<ion-header>
  <ion-toolbar>
    <ion-title>SA Performance</ion-title>
    <ion-buttons slot="start">
      <ion-back-button text="Back" defaultHref="/reports"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="p-2">
    <ion-list class="list-custom" lines="none">
      <app-calendar-input title="Start Date" [date_value]="startDate" (onDateSelected)="onStartDateSelected($event)"></app-calendar-input>
      <app-calendar-input title="End Date" [date_value]="endDate" (onDateSelected)="onEndDateSelected($event)"></app-calendar-input>
    </ion-list>
    <ion-button class="pt-2" expand="block" size="default" [disabled]="!startDate||!endDate" (click)="loadReport()">Search</ion-button>
    <ngx-datatable *ngIf="objects && objects.length > 0"
      class="fullscreen material mt-2"
      [rows]="objects" 
      [rowHeight]="'auto'" 
      [columns]="columns"
      [columnMode]="'force'"
      [footerHeight]="50"
      [scrollbarH]="true">
      <ngx-datatable-column prop="salesAgentName" name="SA Name" [width]="90">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div class="flex ion-text-wrap font-half-size">{{row.salesAgentName}}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column prop="invoiceAmt" name="Invoice" [width]="90">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div class="flex ion-text-wrap font-half-size ion-text-right">{{row.invoiceAmt|number:'1.2-2'}}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column prop="cnAmount" name="Credit Note" [width]="90">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div class="flex ion-text-wrap font-half-size ion-text-right"> {{row.cnAmount | number:'1.2-2'}}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column prop="soAmount" name="SO Amount" [width]="90">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div class="flex ion-text-wrap font-half-size ion-text-right"> {{row.soAmount | number:'1.2-2'}}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column prop="netAmount" name="Net Amount" [width]="90">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <div class="flex ion-text-wrap font-half-size ion-text-right"> {{row.netAmount | number:'1.2-2'}}</div>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-footer>
        <ng-template
          ngx-datatable-footer-template
          let-rowCount="rowCount"
          let-pageSize="pageSize"
          let-selectedCount="selectedCount"
          let-curPage="curPage"
          let-offset="offset">
          <div class="p-2 w-full">
            <ion-grid class="ion-no-padding">
              <ion-row>
                <ion-col class="ion-flex ion-margin-auto">Total Sales: </ion-col>
                <ion-col class="ion-flex ion-margin-auto justify-content-end">{{objects|sum:'netAmount'|number:'1.0'}}</ion-col>
              </ion-row>
            </ion-grid>
          </div>
        </ng-template>
      </ngx-datatable-footer>
    </ngx-datatable>
  </div>
</ion-content>
