<ion-item (click)="showModal()" [disabled]="disabled">
   <ion-label class="font-bold" position="stacked">{{title}}</ion-label>
   <div *ngIf="selected && selected?.oldCode">
      <ion-grid class="ion-no-padding">
         <ion-row class="mt-2">
            <ion-col class="ion-flex ion-margin-auto">
               <ion-badge *ngIf="selected && selected?.code">
                  <div>{{selected?.code}}</div>
               </ion-badge>
               <ion-badge color="tertiary" *ngIf="selected && selected?.oldCode">
                  <div>{{selected?.oldCode}}</div>
               </ion-badge>
            </ion-col>
         </ion-row>
         <ion-row class="my-2">
            <ion-col class="ion-margin-auto">
               <div class="ion-text-wrap">{{selected?.[optionLabel]}}</div>
            </ion-col>
         </ion-row>
      </ion-grid>
   </div>
   <div *ngIf="selected && !selected?.oldCode">
      <ion-grid class="ion-no-padding">
         <ion-row class="my-2">
            <ion-col class="ion-flex ion-margin-auto">
               <ion-badge style="display:inline-flex" *ngIf="selected && selected?.code">
                  <div>{{selected?.code}}</div>
               </ion-badge>
               <div class="my-auto ml-2">{{selected?.[optionLabel]}}</div>
            </ion-col>
         </ion-row>
      </ion-grid>
   </div>
   <ion-input *ngIf="!selected" [placeholder]="'Select ' + title" readonly></ion-input>
</ion-item>

<ion-modal [isOpen]="isModalOpen" (didDismiss)="isModalOpen = false" (ionModalDidPresent)="setFocus()">
   <ng-template>
      <ion-header>
         <ion-toolbar>
            <ion-title>
               <div class="ion-text-wrap">{{title}}</div>
            </ion-title>
            <ion-buttons slot="start">
               <ion-button (click)="apply()">Done</ion-button>
            </ion-buttons>
            <ion-buttons slot="primary">
               <ion-button (click)="clear()">Clear</ion-button>
            </ion-buttons>
         </ion-toolbar>
         <ion-toolbar>
            <ion-searchbar #searchBar class="p-0" enterkeyhint="search" [(ngModel)]="searchText" showCancelButton="never" animated="true" [placeholder]="title ? 'Search for ' + title : 'Search'" (keydown)="onKeyDown($event)" (ionClear)="resetFilter();" (search)="searchItem()"></ion-searchbar>
         </ion-toolbar>
      </ion-header>
      <ion-content>
         <div class="p-2">
            <ion-list class="list-custom animate__animated animate__fadeIn" lines="none" *ngIf="tempDropdownList.length > 0">
               <ion-item button detail="false" *ngFor="let item of tempDropdownList" (click)="chooseThis(item)">
                  <div slot="start">
                     <ion-grid class="ion-no-padding">
                        <ion-row>
                           <ion-col class="ion-margin-auto">
                              <ion-badge style="display:inline-flex" *ngIf="item && item?.code">
                                 <div>{{item?.code}}</div>
                              </ion-badge>
                           </ion-col>
                        </ion-row>
                        <ion-row *ngIf="item && item?.oldCode">
                           <ion-col class="ion-margin-auto">
                              <ion-badge style="display:inline-flex" color="tertiary" *ngIf="item && item?.oldCode">
                                 <div>{{item?.oldCode}}</div>
                              </ion-badge>
                           </ion-col>
                        </ion-row>
                     </ion-grid>
                  </div>
                  <div class="ion-text-wrap">{{item?.description}}</div>
               </ion-item>

            </ion-list>
            <div class="ion-flex justify-content-center"
               *ngIf="tempDropdownList.length === 0 && emptyMessage.length > 0">
               {{emptyMessage}}
            </div>
         </div>

         <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)" threshold="30%">
            <ion-infinite-scroll-content></ion-infinite-scroll-content>
         </ion-infinite-scroll>

      </ion-content>
   </ng-template>
</ion-modal>